### A. Tổng quan về giao thức SNMP

### 1.Tổng quan giao thức SNMP
- SNMP còn được gọi là Simple Network Managerment Protocol, là một phần của bộ giao thức (TCP/IP). SNMP được sử dụng phổ biến trong việc giám sát và điều khiển thiết bị mạng như Switch , router , server ....
- Một số bài toán thực tế sử dụng SNMP : 
	- Giám sát tài nguyên máy chủ
	- Giám sát lưu lượng trên port của switch , router
	- Cảnh báo sự cố tức thời (down port, login fail , ....)

### 2. Các key_word trong SNMP
- 1. SNMP Agent : Là các thiết bị , máy tính hoặc cá phần mềm tương thích SNMP và được quản lý bởi SNMP Management
- 2. SNMP Management : Giám sát và điều khiển tầm trung các thông tin từ các Agent
- 3. Object ID : Mỗi thiets bị hỗ trợ SNMP có thể cung cấp nhiều thông tin , mỗi thông tin đó được gọi là một object tương ứng với OID
- 4. Object access : Mỗi Object có quyền Read_only hoặc Read_write
- 5. Management Information Base (MIB ) : Cấu trúc dữ liệu gồm các đối tượng được quản lý

### 3. Các phương thức của SNMP
- 1. GetRequest : Manager gửi GetRequest cho agent để yêu cầu agent cung cấp thông tin nào đó dựa vào ObjectID
- 2. GetNexRequest : Manager gửi GetNextRequest có chứa một ObjectID cho Agent và yêu cầu Agent cung cấp thông tin nằm kế tiếp ObjectID đó trong MIB
- 3. SetRequest : Manager gửi SetRequest cho Agent để dặt giá trị cho đối tượng của Agent dựa vào ObjectID
- 4. GetReponse : Agent gửi GetRequest cho Manager để trả lời khi nhận được GetRequest/GetNextRequest
- 5. Trap : Agent tự động gửi Trap cho Manager khi có một sự kiện xảy ra đối với một Object nào đó trong Agent


### B. SNMPWALK
### 1. Tổng quan SNMPWALK 
- SNMPWALK là một ứng dụng của SNMP(simple network management protocol) có trên CLI của SMS ( security management system ) và sử dụng SNMP GetNextRequest để truy vấn thông tin thiết bị mạng


### 2. Command
```
C:\Users\ITA\Downloads\SnmpWalk.exe SnmpWalk.exe [-q] -r:host [-p:port] [-t:timeout] [-v:version] [-c:community]
        [-ei:engine_id] [-sn:sec_name] [-ap:auth_proto] [-aw:auth_passwd]
        [-pp:priv_proto] [-pw:priv_passwd] [-ce:cont_engine] [-cn:cont_name]
                [-os:start_oid] [-op:stop_oid] [-csv]

- C:\Users\ITA\Downloads\SnmpWalk.exe : Đường dẫn chứa file SnmpWalk.exe
- q : Chỉ in giá trị biến , bỏ qua phần tiêu đề
- r : Name hoặc IP của host remote
- p : port
- t : thời gian timeout , mặc định là 5s
- v : version , mặc định là 1
- c : mặc định là public
- ei : Engine ID : Định dạng thập lục phân (SNMPv3)
- sn : Sec_name ,security name SNMPv3
- ap : authen_application : MD5 , SHA (SNMPv3)
- aw : authen_password
- pp : privaci_protocol : giao thức bảo mật DÉ , AES128/192/256 , 3DES (SNMPv3)
- os : OID fist start , mặc định là 1
- op : OID stop 
- csv : output định dạng csv
```

### 3. Install snmpwalk on windowns
https://www.softpedia.com/get/Network-Tools/Misc-Networking-Tools/SnmpWalk.shtml

### 4. Install snmpwalk on linux
```
yum install net-snmp-utils

```

### C. Sử dụng snmpwalk trên linux để lấy thông tin system win10
### 1. Cài đặt snmpwalk trên linux
```
yum install net-snmp-utils

```

### 2. Thực hiện thao tác trên windowns

![](../images/69.png)


![](../images/70.png)


![](../images/71.png)


![](../images/72.png)


- Truy cập cài đặt Snmp trong service

![](../images/73.png)

![](../images/74.png)


![](../images/75.png)


### 3. Kiểm tra PID của process trong taskmanagement

![](../images/76.png)


### 4. Xem thông tin về PID hoặc Disk-Space
> Thực hiện " thủ công " lưu các thông tin vào file rồi đọc thông số trong đó


```
snmpwalk -v 2c 10.1.20.74 -c win10 > 3.txt

- -v 2c : sử dụng phiên phải v2c
- 10.1.20.74 : IP của Windows Agent
- win10 : Name Community cài đặt ở trong service của windows
- 3.txt : File sẽ lưu thông tin lại 
```


- Kiểm tra PID
	- Search trong file 3.txt PID hoặc Name_process.ext


- Kiểm tra Disk-Space
	- Tìm ` HOST-RESOURCES-MIB::hrStorage` 
	- Tính dung lượng của vùng nhớ đơn vị bytes : Số Interger * Giá trị của Interger (4096/65536) 


